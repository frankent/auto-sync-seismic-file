# üßæ BRD Spec ‚Äì Multi-Station File Uploader with Retry & Telegram Notification

## 1. Overview

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠ **‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ (station)** ‡∏ö‡∏ô Windows ‡πÑ‡∏õ‡∏¢‡∏±‡∏á FTP Server ‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 00:05 ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ **WinSCP + PowerShell + Task Scheduler**

* ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ (multi-station)
* ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö log + retry
* ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô Telegram
* ‡∏°‡∏µ DryRun mode ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö mapping

---

## 2. Goals & Objectives

1. ‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå `.gcf` ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á FTP server ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
2. ‡∏´‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏î‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô retry queue ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ
3. ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Telegram group/channel
4. ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö log ‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ dryrun ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π path ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á

---

## 3. Scope of Work

### In-Scope

* ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå `.gcf` ‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞ station (‡∏¢‡πà‡∏≠‡∏¢‡∏à‡∏≤‡∏Å `BaseFolder`)
* ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á FTP Server ‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ path:

  ```
  /SMA-File-InFraTech/<DeviceName>/<YYYY>/<MM>/<DD>/<filename>
  ```
* ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö include/exclude pattern (configurable)
* ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ retry queue ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô log ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô N ‡∏ß‡∏±‡∏ô (default 30)
* ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á Telegram

### Out-of-Scope

* ‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö monitor ‡πÅ‡∏ö‡∏ö real-time
* ‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° web dashboard
* ‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö retry ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

---

## 4. Functional Requirements

| Requirement               | Description                                      |
| ------------------------- | ------------------------------------------------ |
| **Multi-Station Support** | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ station ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÉ‡∏ô `config.json` |
| **File Filtering**        | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö include/exclude patterns                  |
| **File Ready Check**      | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (`Is-FileReady`)       |
| **Retry Queue**           | ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏•‡∏á `retry-queue.json` |
| **Logging**               | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô log file (daily log)     |
| **Retention**             | ‡∏•‡∏ö log ‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô `LogRetentionDays`               |
| **DryRun Mode**           | ‡∏û‡∏¥‡∏°‡∏û‡πå mapping (local ‚Üí remote) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î     |
| **Telegram Notify**       | ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (OK/Fail) ‡∏ú‡πà‡∏≤‡∏ô Telegram         |
| **Scheduler**             | ‡∏ï‡∏±‡πâ‡∏á Task Scheduler ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 00:05  |

---

## 5. Non-Functional Requirements

| Category            | Requirement                                                  |
| ------------------- | ------------------------------------------------------------ |
| **OS**              | Windows 8, 10, 11                                            |
| **Tool**            | PowerShell 5+, WinSCP (Portable)                             |
| **Security**        | ‡∏ã‡πà‡∏≠‡∏ô password ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô config.json (file permission restricted) |
| **Scalability**     | ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö station ‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ï‡∏≤‡∏° config.json                    |
| **Maintainability** | ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÅ‡∏¢‡∏Å config ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î, ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡πà‡∏≤‡∏¢             |

---

## 6. Configurations

**File:** `config.json`

```json
{
  "BaseFolder": "C:\\scream\\data",
  "Stations": [
    { "StationFolder": "5lc400", "DeviceName": "01.SMA-BangNiewDam-01" },
    { "StationFolder": "5lc0n0", "DeviceName": "02.SMA-BangNiewAbutment-02" }
  ],
  "FtpHost": "122.154.8.21",
  "FtpPort": 38866,
  "FtpUser": "FTP-SMA-InFraTech01",
  "FtpPass": "REPLACE_ME",
  "TelegramToken": "123456:REPLACE_ME",
  "TelegramChatId": "-1001234567890",
  "IncludePatterns": ["*.gcf"],
  "ExcludePatterns": ["*.tmp", "*.part", "*.lock"],
  "LogRetentionDays": 30,
  "WinScpPath": "C:\\SyncToCenter\\winscp\\winscp.com",
  "DryRun": false
}
```

---

## 7. Success Criteria

* ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå `.gcf` ‡∏ó‡∏∏‡∏Å station ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
* ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà fail ‡∏ñ‡∏π‡∏Å retry ‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
* ‡∏°‡∏µ log + summary ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
* ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Telegram ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô

---

## 8. Future Enhancements (Optional)

* Dashboard ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏ü‡∏•‡πå
* Retry ‡πÅ‡∏ö‡∏ö real-time (monitoring + auto-retry)
* Encryption ‡∏Ç‡∏≠‡∏á config.json (FTP password)
